<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Staging Behavior | Co-Development of ABMs</title>
  <meta name="description" content="This document contains a libvrary of model functions for agent-basewd modeling simulations of diadromous fish" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Staging Behavior | Co-Development of ABMs" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This document contains a libvrary of model functions for agent-basewd modeling simulations of diadromous fish" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Staging Behavior | Co-Development of ABMs" />
  
  <meta name="twitter:description" content="This document contains a libvrary of model functions for agent-basewd modeling simulations of diadromous fish" />
  

<meta name="author" content="Vanessa Quintana" />


<meta name="date" content="2025-11-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="selective-tidal-stream-transport.html"/>
<link rel="next" href="homing-behavior.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i>Motivation</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="overview.html"><a href="overview.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="overview.html"><a href="overview.html#introduction-to-agent-based-models"><i class="fa fa-check"></i><b>1.2</b> Introduction to Agent-Based Models</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="overview.html"><a href="overview.html#what-abms-can-help-us-understand"><i class="fa fa-check"></i><b>1.2.1</b> What ABMs Can Help Us Understand</a></li>
<li class="chapter" data-level="1.2.2" data-path="overview.html"><a href="overview.html#what-abms-are-not-designed-to-do"><i class="fa fa-check"></i><b>1.2.2</b> What ABMs Are Not Designed to Do</a></li>
<li class="chapter" data-level="1.2.3" data-path="overview.html"><a href="overview.html#emergent-behaviors"><i class="fa fa-check"></i><b>1.2.3</b> Emergent Behaviors</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Co-Development of ABMs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="staging-behavior" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">Chapter 10</span> Staging Behavior<a href="staging-behavior.html#staging-behavior" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="overview-8" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Overview<a href="staging-behavior.html#overview-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Staging is a behavioral state that allows agents to temporarily halt migration and recover energy or acclimate to dynamic estuary conditions (i.e., temperature, salinity) before continuing upstream (landward) or downstream (seaward) movement. It is triggered when agents experience low energy or high physiological stress and is resolved when recovery thresholds are met.</p>
</div>
<div id="purpose-6" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> Purpose<a href="staging-behavior.html#purpose-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To simulate the biologically necessary pause in migratory activity used for energy recovery and physiological acclimation, particularly under stressful conditions.</p>
</div>
<div id="entities-state-variables-and-scales-7" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> Entities, State Variables, and Scales<a href="staging-behavior.html#entities-state-variables-and-scales-7" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="patch-variables-7" class="section level3 hasAnchor" number="10.3.1">
<h3><span class="header-section-number">10.3.1</span> Patch Variables<a href="staging-behavior.html#patch-variables-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr>
<th align="center">Variable Name</th>
<th align="center">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>Velocity</strong> <span class="math inline">\(V_{patch}\)</span></td>
<td align="center">The along-channel velocity of a given patch, derived from hydrodynamic model inputs, where positive values are in the landward direction and negative values are in the seaward direction.</td>
</tr>
<tr>
<td align="center"><strong>staging-in-patch</strong></td>
<td align="center">Count of staging agents within a patch (for habitat quality analysis).</td>
</tr>
</tbody>
</table>
</div>
<div id="agent-variables-7" class="section level3 hasAnchor" number="10.3.2">
<h3><span class="header-section-number">10.3.2</span> Agent Variables<a href="staging-behavior.html#agent-variables-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr>
<th align="center">Variable Name</th>
<th align="center">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>size</strong> <span class="math inline">\(M_{agent}\)</span></td>
<td align="center">The size of an agent.</td>
</tr>
<tr>
<td align="center"><strong>M-max</strong> <span class="math inline">\(M_{max}\)</span></td>
<td align="center">Maximum size found within the agent’s population.</td>
</tr>
<tr>
<td align="center"><strong>age</strong> <span class="math inline">\(A_{agent}\)</span></td>
<td align="center">The age of an agent.</td>
</tr>
<tr>
<td align="center"><strong>A-max</strong> <span class="math inline">\(A_{max}\)</span></td>
<td align="center">Maximum age found within the agent’s population.</td>
</tr>
<tr>
<td align="center"><strong>energy</strong> <span class="math inline">\(E_{agent}\)</span></td>
<td align="center">The total energy the agent currently possesses.</td>
</tr>
<tr>
<td align="center"><strong>stress</strong> <span class="math inline">\(S\)</span></td>
<td align="center">Stress level based on environmental mismatch.</td>
</tr>
<tr>
<td align="center"><strong>staging?</strong> <span class="math inline">\(stage_{?}\)</span></td>
<td align="center">Boolean flag indicating whether the agent is currently staging.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="process-overview-and-scheduling-7" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> Process Overview and Scheduling<a href="staging-behavior.html#process-overview-and-scheduling-7" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><p>Evaluate energy and stress levels.</p></li>
<li><p>If energy is ≤ 25% or stress &gt; 5, agent enters staging behavior.</p></li>
<li><p>During staging, agents stop migrating, form schools, seek calm water, and regain energy.</p></li>
<li><p>If energy ≥ 75% and stress = 1, staging ends and active migration resumes.</p></li>
</ol>
</div>
<div id="design-concepts-7" class="section level2 hasAnchor" number="10.5">
<h2><span class="header-section-number">10.5</span> Design Concepts<a href="staging-behavior.html#design-concepts-7" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Basic Principles:</strong> Staging is based on physiological ecology principles recognizing the need for energetic and osmoregulatory recovery before continued migration.</p>
<p><strong>Emergence:</strong> Collective staging areas and patterns emerge from local environmental conditions and individual agent needs.</p>
<p><strong>Adaptation:</strong> Agents adaptively stop migrating when unable to continue due to exhaustion or stress, shifting to a recovery behavior.</p>
<p><strong>Sensing:</strong> Agents assess their internal energy and stress state.</p>
<p><strong>Stochasticity:</strong> Recovery rate includes random variation to simulate individual differences.</p>
<p><strong>Collectives:</strong> Agents may cluster spatially during staging but do not form persistent groups.</p>
<p><strong>Observation:</strong> Number of staging agents and energy dynamics can be recorded for habitat analysis.</p>
</div>
<div id="initialization-7" class="section level2 hasAnchor" number="10.6">
<h2><span class="header-section-number">10.6</span> Initialization<a href="staging-behavior.html#initialization-7" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<table style="width:99%;">
<colgroup>
<col width="16%" />
<col width="23%" />
<col width="60%" />
</colgroup>
<thead>
<tr>
<th align="center">Variable</th>
<th align="center">Initialized Value</th>
<th align="center">Justification</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>size</strong> <span class="math inline">\(M_{agent}\)</span></td>
<td align="center">user-defined and species-specific</td>
<td align="center">Representative body length of a migrating agent.</td>
</tr>
<tr>
<td align="center"><strong>M-max</strong> <span class="math inline">\(M_{max}\)</span></td>
<td align="center">user-defined and species-specific</td>
<td align="center">Based on the maximum body length in the agent’s population.</td>
</tr>
<tr>
<td align="center"><strong>age</strong> <span class="math inline">\(A_{agent}\)</span></td>
<td align="center">user-defined and species-specific</td>
<td align="center">Representative age length of a migrating agent.</td>
</tr>
<tr>
<td align="center"><strong>A-max</strong> <span class="math inline">\(A_{max}\)</span></td>
<td align="center">user-defined and species-specific</td>
<td align="center">Based on the maximum age in the agent’s population.</td>
</tr>
<tr>
<td align="center"><strong>energy</strong> <span class="math inline">\(E_{agent}\)</span></td>
<td align="center"><span class="math inline">\(100 \%\)</span></td>
<td align="center">Agent starts migration at 100% relative energy capacity.</td>
</tr>
<tr>
<td align="center"><strong>Stress</strong> <span class="math inline">\(S\)</span></td>
<td align="center">1</td>
<td align="center">Acclimated agents have minimal stress levels.</td>
</tr>
<tr>
<td align="center"><span class="math inline">\(k\)</span></td>
<td align="center">0.75</td>
<td align="center">Energetic scaling component that follows Kleiber’s Law.</td>
</tr>
<tr>
<td align="center"><span class="math inline">\(\alpha\)</span></td>
<td align="center">-0.3 to 0.5 (user-defined)</td>
<td align="center">This value can be calibrated based on your biological assumptions:<br />
• <span class="math inline">\(\alpha &lt; 0\)</span>: Younger fish recover faster (higher turnover, rapid metabolism)<br />
• <span class="math inline">\(\alpha &gt; 0\)</span>: Older fish recover faster (more energy reserves, lower stress sensitivity)<br />
• <span class="math inline">\(\alpha = 0\)</span>: Age has no effect on recovery (neutral assumption)</td>
</tr>
</tbody>
</table>
</div>
<div id="submodels-7" class="section level2 hasAnchor" number="10.7">
<h2><span class="header-section-number">10.7</span> Submodels<a href="staging-behavior.html#submodels-7" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="trigger-conditions-for-staging" class="section level3 hasAnchor" number="10.7.1">
<h3><span class="header-section-number">10.7.1</span> Trigger Conditions for Staging<a href="staging-behavior.html#trigger-conditions-for-staging" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Agents will enter the staging state under either of the following conditions:</p>
<p><span class="math display">\[
E_{agent} \leq 25 \%
\]</span></p>
<p><span class="math display">\[
S &gt; 5
\]</span></p>
<p>Where:</p>
<ul>
<li><p><span class="math inline">\(E_{agent}\)</span> is the current energy available to the agent.</p></li>
<li><p><span class="math inline">\(S\)</span> is the current stress level of the agent.</p></li>
</ul>
<p>These thresholds are designed to prevent migration collapse due to exhaustion or high osmotic stress.</p>
</div>
<div id="behavior-during-staging" class="section level3 hasAnchor" number="10.7.2">
<h3><span class="header-section-number">10.7.2</span> Behavior During Staging<a href="staging-behavior.html#behavior-during-staging" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>During staging, agents move to the nearest water patch with the lowest absolute velocity to reduce energetic costs. If no such patch is found, a random neighboring water patch is selected.</p>
<p>Position is updated as:</p>
<p><span class="math display">\[
\vec{Y}_{t+1} = \vec{Y}_{target}
\]</span></p>
<p>Energy recovery occurs at a variable rate:</p>
<p><span class="math display">\[
E_{agent} = E_{agent} + \left((1 + \epsilon) \cdot \left( \frac{M_{agent}}{M_{max}} \right)^k \cdot \left( \frac{A_{agent}}{A_{max}} \right)^\alpha \right) \quad \text{where } \epsilon \sim U(0,1),\ k \leq 1
\]</span></p>
<p>Patch records presence of staging agents:</p>
<p><span class="math display">\[
\text{staging-in-patch} = \text{staging-in-patch} + 1
\]</span></p>
<p>Where:</p>
<ul>
<li><p><span class="math inline">\(\vec{Y}_{t+1}\)</span> is the position after drifting.</p></li>
<li><p><span class="math inline">\(\vec{Y}_{target}\)</span> is the agent’s target spatial position.</p></li>
<li><p><span class="math inline">\(V_{patch}\)</span> is the along-channel velocity at the agent’s current patch.</p></li>
<li><p><span class="math inline">\(M_{agent}\)</span> is the size of the agent.</p></li>
<li><p><span class="math inline">\(M_{max}\)</span> is the maximum size within the agent’s population.</p></li>
<li><p><span class="math inline">\(A_{agent}\)</span>: the age of the agent.</p></li>
<li><p><span class="math inline">\(A_{max}\)</span>: the maximum age within the population.</p></li>
<li><p><span class="math inline">\(E_{swim}\)</span> is the total energy cost during passive movement.</p></li>
<li><p><span class="math inline">\(k\)</span> is the scaling exponent, reflecting nonlinear energy recovery.</p></li>
<li><p><span class="math inline">\(\alpha\)</span>: an age-scaling exponent</p></li>
</ul>
<p><strong>Suggestion</strong>:<br />
</p>
<p>• <span class="math inline">\(\alpha = -0.25\)</span> if modeling faster recovery in younger fish.<br />
</p>
<p>• <span class="math inline">\(\alpha = 0.25\)</span> if modeling increased efficiency in older/larger individuals.</p>
</div>
<div id="stop-conditions-for-staging" class="section level3 hasAnchor" number="10.7.3">
<h3><span class="header-section-number">10.7.3</span> Stop Conditions for Staging<a href="staging-behavior.html#stop-conditions-for-staging" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Agent will remain in the staging state until both of the following conditions are met:</p>
<p><span class="math display">\[
E_{agent} \geq 75 \%
\]</span></p>
<p><span class="math display">\[
S = 1
\]</span></p>
<p>Where:</p>
<ul>
<li><p><span class="math inline">\(E_{agent}\)</span> is the current energy available to the agent.</p></li>
<li><p><span class="math inline">\(S\)</span> is the current stress level of the agent.</p></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="selective-tidal-stream-transport.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="homing-behavior.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/09-Staging_Behavior_Function.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
